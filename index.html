<html>
<head>
	<link rel="stylesheet" href="style.css">
</head>
<body onload="creategrid()">

<div class="split left">
	<h1 class="text">Sudoku</h1>
	<h4 class="text">Hours of brain challenging fun</h4><br>
	<div class="text">
		<h4> Grid: 
			<select onchange="creategrid()" id="grid">
				<option value="4" selected="selected">4x4</option>
				<option value="6">6x6</option>
				<option value="9">9x9</option>
				<option value="16">16x16</option>
			</select>
		</h4>
		
		<h4> Level: 
			<input type="radio" name="lvl" value="easy" checked="checked" onclick="creategrid()"> Easy
			<input type="radio" name="lvl" value="med" onclick="creategrid()"> Medium
			<input type="radio" name="lvl" value="hard" onclick="creategrid()"> Hard
		</h4>
		
		<div id="btns" >
		<button type="button" class="button">Hint</button>
		<button type="button" class="button">Check</button>
		<button type="button" class="button" onclick="creategrid()">Reset</button><br><br>
		<button type="button" class="button" onclick="solution()">See Solution</button><br><br>
		<button type="button" class="button" onclick="emptygrid()">Create Your Own Grid</button>
		</div>
		
	</div>
</div>

<div class="split right" >
	<div class="centered" id="right">
	</div>
	
</div>

<script type="text/javascript">
document.getElementById("grid").onchange = function() {creategrid()};
document.getElementsByName("lvl").onchange = function() {creategrid()};
let MAX=25;
function creategrid() {
	document.getElementById("right").innerHTML = "";
	let count=document.getElementById('grid').value;
	let level=document.querySelector('input[name=lvl]:checked').value;
	let body = document.getElementById("right");
		let tbl = document.createElement("table");
	  	let tblBody = document.createElement("tbody");
	  	for (let i = 0; i < count; i++) {
	    	let row = document.createElement("tr");
	    	for (let j = 0; j < count; j++) {
	      		let cell = document.createElement("td");
				cell.setAttribute("contenteditable","true");
	      		let cellText = document.createTextNode('');
	      		cell.appendChild(cellText);
	      		row.appendChild(cell);
	    	}
	    	tblBody.appendChild(row);
	  	}tbl.appendChild(tblBody);
	  	body.appendChild(tbl);
	
	if(count==4){
		if(level === "easy"){
		var easy = new Array(['','','','3'],['3','2','4',''],['','4','3','2'],['2','','','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else if(level === "med"){
		var easy = new Array(['3','','',''],['','1','3',''],['','4','2',''],['','','','4']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else{
		var easy = new Array(['1','','4',''],['','','',''],['','','',''],['','1','','2']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
	}
	else if(count==6){
		if(level === "easy"){
		var easy = new Array(['','','','','5','2'],['2','','5','','6',''],['1','','','','',''],['4','6','2','3','','5'],['','4','','','3',''],['','2','','','4','1']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else if(level === "med"){
		var easy = new Array(['','5','','3','','2'],['','','','','',''],['1','','','','',''],['','2','','','5',''],['','1','','4','',''],['4','','','5','6','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else{
		var easy = new Array(['','','6','','',''],['4','','','','','1'],['','5','','','3','2'],['','','','','',''],['','3','2','5','',''],['','','','','','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
	}
	else if(count==9){
		if(level === "easy"){
		var easy = new Array(['5','','9','1','','','6','4','2'],['','4','1','','5','','','8',''],['6','7','','2','','4','','9','5'],['1','','','8','','3','','5','9'],['8','9','4','5','6','','3','7','1'],['','','5','4','1','','2','6','8'],['3','','8','7','4','','','',''],['','','','6','','5','8','3','4'],['4','','6','3','9','8','5','1','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else if(level === "med"){
		var easy = new Array(['1','','3','','','','','7',''],['4','9','8','','7','','','',''],['7','6','5','4','2','3','8','',''],['6','5','4','','3','','','','7'],['','','','9','','','5','',''],['','7','','6','','5','','',''],['','8','7','','','','1','2','9'],['','','','','','','','6',''],['','4','6','5','1','','7','','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else{
		var easy = new Array(['9','','','','3','','','',''],['','','','6','','','','',''],['','','','7','1','','','2',''],['4','','','1','5','6','','',''],['','2','','','','','','',''],['','8','','4','','','','',''],['7','','','','4','','5','','9'],['1','','','8','','','3','',''],['2','','','','','','','','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
	}
	else{
		if(level === "easy"){
		var easy = new Array(['','','','3'],['3','2','4',''],['','4','3','2'],['2','','','']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else if(level === "med"){
		var easy = new Array(['3','','',''],['','1','3',''],['','4','2',''],['','','','4']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
		else{
		var easy = new Array(['1','','4',''],['','','',''],['','','',''],['','1','','2']);
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(easy[i][j]!== ''){
						tbl.rows[i].cells[j].innerHTML=easy[i][j];
					}
					else{
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
					}
				}
			}
		}
	}
	
}
function emptygrid() {
	document.getElementById("right").innerHTML = "";
	let count=document.getElementById('grid').value;
	let body = document.getElementById("right");
		let tbl = document.createElement("table");
	  	let tblBody = document.createElement("tbody");
	  	for (let i = 0; i < count; i++) {
	    	let row = document.createElement("tr");
	    	for (let j = 0; j < count; j++) {
	      		let cell = document.createElement("td");
				cell.setAttribute("contenteditable","true");
	      		let cellText = document.createTextNode('');
	      		cell.appendChild(cellText);
	      		row.appendChild(cell);
	    	}
	    	tblBody.appendChild(row);
	  	}tbl.appendChild(tblBody);
	  	body.appendChild(tbl);	
}
/*
function solution(){
	creategrid();
	let count=document.getElementById('grid').value;
	let counter=0;
	console.log("solving 4x4");
	let result=[],rowi=[],colj=[],square=[],sol=[];
	let body = document.getElementById("right");
	let tbl = body.getElementsByTagName("table")[0];
	let tblbody = tbl.getElementsByTagName("tbody")[0];
	for(let i=0;i<count;i++){
	row = tblbody.getElementsByTagName("tr")[i];
		result[i]=[];
		for(let j=0;j<count;j++){
			col = row.getElementsByTagName("td")[j];
			cellvalue=col.childNodes[0];
			if(cellvalue!==undefined){
				result[i][j]=cellvalue.data;
			}
		}
	}
	sol=result;
	for(let i=0;i<count;i++){
		for(let j=0;j<count;j++){
			if(sol[i][j] !== ''){
				counter++;
			}
		}
	}
	console.log(counter);
	if(count==4){
		while(counter<16){
			for(let i=0;i<count;i++){
				for(let j=0;j<count;j++){
					if(result[i][j] === ''){
						for(let k=0;k<count;k++){
							rowi[k]=result[i][k];
						}
						for(let k=0;k<count;k++){
							colj[k]=result[k][j];
						}
						if((i === 0 || i === 1) && (j === 0 || j === 1)) {
							for(let l=0,k=0;l<count/2;l++,k++){
								for(let m=0;m<count/2;m++,k++){
									square[k]=result[l][m];
								}
							}
						}
						else if((i === 0 || i === 1) && (j === 2 || j === 3)){
							for(let l=0,k=0;l<count/2;l++,k++){
								for(let m=2;m<count;m++,k++){
									square[k]=result[l][m];
								}
							}
						}
						else if((i === 2 || i === 3) && (j === 0 || j === 1)){
							for(let l=2,k=0;l<count;l++,k++){
								for(let m=0;m<count/2;m++,k++){
									square[k]=result[l][m];
								}
							}
						}
						else if((i === 2 || i === 3) && (j === 2 || j === 3)){
							for(let l=2,k=0;l<count;l++,k++){
								for(let m=2;m<count;m++,k++){
									square[k]=result[l][m];
								}
							}
						}
						function notincluded(value){
							return (!rowi.includes(value) && !colj.includes(value) && !square.includes(value));
						}
						tbl.rows[i].cells[j].setAttribute("data-sol","1");
						tbl.rows[i].cells[j].innerHTML=Array.from('1234').filter(notincluded);
						if(Array.from('1234').filter(notincluded).length === 1){
							sol[i][j]=Array.from('1234').filter(notincluded)[0];
							result[i][j]=Array.from('1234').filter(notincluded)[0];
							counter++;
							console.log(result[i][j]);
							console.log(counter);
						}
					}
				}
			}
		}
	}
}*/
function solution(){
		/*creategrid();
		let size=document.getElementById('grid').value;
		console.log("solving 9x9");
		let sudoku=new Array();
		let solved_flag = 0;
		let body = document.getElementById("right");
		let tbl = body.getElementsByTagName("table")[0];
		let tblbody = tbl.getElementsByTagName("tbody")[0];
		for(let i=0;i<size;i++){
		row = tblbody.getElementsByTagName("tr")[i];
			sudoku[i]=new Array();
			for(let j=0;j<size;j++){
				col = row.getElementsByTagName("td")[j];
				cellvalue=col.childNodes[0];
				if(cellvalue.data==="")
					sudoku[i][j]="0";
				else
					sudoku[i][j]=cellvalue.data;
			}
		}
		//console.log("main",sudoku);*/
		let sudoku = [[5,0,9,1,0,0,6,4,2],[0,4,1,0,5,0,0,8,0],[6,7,0,2,0,4,0,9,5],[1,0,0,8,0,3,0,5,9],[8,9,4,5,6,0,3,7,1],[0,0,5,4,1,0,2,6,8],[3,0,8,7,4,0,0,0,0],[0,0,0,6,0,5,8,3,4],[4,0,6,3,9,8,5,1,0]];
		let size=9;
		let solved_flag = 0;
		Solve(sudoku, size, solved_flag);
}
function isFull(sudoku, size)
{
    let i,j;
	//console.log(sudoku);
    for(i=0;i<size;i++)
        for(j=0;j<size;j++)
			if(sudoku[i][j]===0)
				return false;
    return true;
}
function findPossibleValues(sudoku, size, a, r,c)
{
    let n=0;
	let i,j;
    let s=Math.sqrt(size);
    let b=new Array();
	console.log("r1=",r);
	console.log("c1=",c);
	//b.fill(0);
	//console.log(sudoku);
    //Note no.s appeared in current row
    for(i=0; i<size; i++){
		b[sudoku[r][i]]=1;
	}
	console.log("bcol= ",b);
    
    //Note no.s appeared in current column
    for(i=0; i<size; i++){
		b[sudoku[i][c]]=1;
	}
	console.log("brow= ",b);
    
    //Note no.s appeared in current block
    r=(r/s)*s, c=(c/s)*s;
	
    for(i=r; i<r+s; i++){
        for(j=c; j<c+s;j++){
			b[sudoku[i][j]]=1;
		}
	}
	console.log("b=",b);
    
    //Fill array a[] with no.s unappeared in current row, column and block
    for(i=1;i<=size; i++)
        if(!b[i])
            a[n++]=i;

    return n;
}
function Solve(sudoku,size,solved_flag){
	let i,j, n=0;
	let a=new Array();
	//console.log(sudoku);
	//a.fill(0);
	//console.log("a= ",a);
    if(isFull(sudoku, size))    {
		if(!solved_flag)
            console.log("Sudoku Solved Successfully!");
        solved_flag = 1;
		console.log(sudoku);
		return;
    }
	
	let break_flag = 0;
    for(i=0;i<size;i++){
        for(j=0;j<size;j++)
            if(!sudoku[i][j]){
                break_flag = 1;
				break;
            }
		
        if(break_flag)
            break;
    }
	console.log("i=",i);
	console.log("j=",j);
    n= findPossibleValues(sudoku, size, a, i, j);
	console.log("n=",n);
	console.log("a=",a);
    for(let l=0;l<n;l++)
    {
        console.log("ans=",a[l],i,"+",j);
		sudoku[i][j]=a[l];
		console.log(sudoku[i][j]);
		console.log(sudoku);
		//tbl.rows[i].cells[j].innerHTML=a[l];
        Solve(sudoku, size, solved_flag);
    }

    sudoku[i][j]=0;
}
</script>

</body>
</html>